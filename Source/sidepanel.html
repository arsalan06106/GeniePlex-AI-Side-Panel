<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GeniePlex AI Side Panel</title>
    <!-- Critical inline CSS for instant visibility - NO FOUC! -->
    <style>
      /* Instant visibility - before external CSS loads */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family:
          -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        background-color: #111318;
        color: #e2e2e6;
        display: flex;
        flex-direction: column;
        height: 100vh;
        width: 100%;
        overflow: hidden;
        visibility: visible !important;
        opacity: 1 !important;
      }

      .container {
        display: flex;
        flex-direction: column;
        height: 100%;
        visibility: visible !important;
        opacity: 1 !important;
      }

      .toolbar {
        display: flex;
        justify-content: flex-start;
        align-items: center;
        gap: 4px;
        padding: 8px 4px;
        background-color: transparent;
        border-bottom: 1px solid
          color-mix(in srgb, var(--glass-highlight) 10%, transparent);
        position: relative;
        overflow-x: auto;
        overflow-y: hidden;
        flex-wrap: nowrap;
        visibility: visible !important;
        opacity: 1 !important;
      }

      .btn {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background-color: transparent;
        border: none;
        padding: 8px 12px;
        cursor: pointer;
        position: relative;
        border-radius: 99em;
        min-width: 64px;
        height: 48px;
        transition: all 0.2s var(--ease-out-quart);
      }

      .btn:hover {
        background-color: color-mix(
          in srgb,
          var(--glass-base) 15%,
          transparent
        );
        transform: scale(1.05);
      }

      .btn:active {
        transform: scale(0.95);
      }

      .toolbar-icon {
        width: 32px;
        height: 32px;
        object-fit: contain;
      }

      .content {
        flex: 1;
        position: relative;
        overflow: hidden;
        background-color: #111318;
      }

      #iframe-container {
        width: 100%;
        height: 100%;
        position: relative;
        background-color: #111318;
      }

      .loader {
        display: flex;
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 100;
        justify-content: center;
        align-items: center;
        background: #1a1a1a;
      }

      .circular-loader {
        animation: rotate 2s linear infinite;
        height: 64px !important;
        width: 64px !important;
        transform-origin: center center;
      }

      .loader-path {
        stroke-dasharray: 1, 200;
        stroke-dashoffset: 0;
        animation: dash 1.5s ease-in-out infinite;
        stroke-linecap: round;
        stroke: #89b4fa;
        fill: none;
        stroke-width: 3 !important;
      }

      @keyframes rotate {
        100% {
          transform: rotate(360deg);
        }
      }

      @keyframes dash {
        0% {
          stroke-dasharray: 1, 200;
          stroke-dashoffset: 0;
        }
        50% {
          stroke-dasharray: 89, 200;
          stroke-dashoffset: -35px;
        }
        100% {
          stroke-dasharray: 89, 200;
          stroke-dashoffset: -124px;
        }
      }

      /* Support page hidden by default */
      .support-page {
        display: none;
      }
    </style>
    <!-- Load full CSS asynchronously - won't block rendering -->
    <link rel="stylesheet" href="sidepanel-modular.css" />
    <link rel="stylesheet" href="styles/themes/liquid-glass.css" />
  </head>
  <body>
    <div class="container">
      <nav class="toolbar" id="toolbar">
        <div class="active-indicator"></div>
        <button
          class="btn glass-btn"
          data-url="https://gemini.google.com/"
          data-label="Gemini"
          draggable="true"
        >
          <div class="state-layer"></div>
          <img
            src="logos/gemini.svg"
            alt="Gemini Icon"
            class="toolbar-icon"
            draggable="false"
          />
          <!-- <span>Gemini</span> -->
        </button>
        <button
          class="btn glass-btn"
          data-url="https://chatgpt.com/"
          data-label="ChatGPT"
          draggable="true"
        >
          <div class="state-layer"></div>
          <img
            src="logos/chatgpt.svg"
            alt="ChatGPT Icon"
            class="toolbar-icon invert-color"
          />
          <!-- <span>ChatGPT</span> -->
        </button>
        <button
          class="btn glass-btn"
          data-url="https://claude.ai/new"
          data-label="Claude"
          draggable="true"
        >
          <div class="state-layer"></div>
          <img
            src="logos/claude.svg"
            alt="Claude Icon"
            class="toolbar-icon"
            draggable="true"
          />
          <!-- <span>Claude</span> -->
        </button>
        <button
          class="btn glass-btn"
          data-url="https://copilot.microsoft.com/chat"
          data-label="Copilot"
          draggable="true"
        >
          <div class="state-layer"></div>
          <img
            src="logos/copilot.svg"
            alt="Copilot Icon"
            class="toolbar-icon"
            draggable="true"
          />
          <!-- <span>Copilot</span> -->
        </button>
        <button
          class="btn glass-btn"
          data-url="https://chat.deepseek.com/"
          data-label="DeepSeek"
          draggable="true"
        >
          <div class="state-layer"></div>
          <img
            src="logos/deepseek.svg"
            alt="DeepSeek Icon"
            class="toolbar-icon"
            draggable="true"
          />
          <!-- <span>DeepSeek</span> -->
        </button>
        <button
          class="btn glass-btn"
          data-url="https://grok.com/"
          data-label="Grok"
          draggable="true"
        >
          <div class="state-layer"></div>
          <img
            src="logos/grok.svg"
            alt="Grok Icon"
            class="toolbar-icon invert-color"
            draggable="true"
          />
          <!-- <span>Grok</span> -->
        </button>
        <button
          class="btn glass-btn"
          data-url="https://chat.mistral.ai/chat"
          data-label="Mistral"
          draggable="true"
        >
          <div class="state-layer"></div>
          <img
            src="logos/mistral.svg"
            alt="Mistral Icon"
            class="toolbar-icon"
            draggable="true"
          />
          <!-- <span>Mistral</span> -->
        </button>
        <button
          class="btn glass-btn"
          data-url="https://www.perplexity.ai/discover"
          data-label="Perplexity"
          draggable="true"
        >
          <div class="state-layer"></div>
          <img
            src="logos/perplexity.svg"
            alt="Perplexity Icon"
            class="toolbar-icon"
            draggable="true"
          />
          <!-- <span>Perplexity</span> -->
        </button>
        <button
          class="btn glass-btn"
          data-url="https://chat.qwen.ai/"
          data-label="Qwen"
          draggable="true"
        >
          <div class="state-layer"></div>
          <img
            src="logos/qwen.svg"
            alt="Qwen Icon"
            class="toolbar-icon invert-color"
            draggable="true"
          />
          <!-- <span>Qwen</span> -->
        </button>
        <button
          class="btn glass-btn"
          data-url="https://www.kimi.com"
          data-label="Kimi"
          draggable="true"
        >
          <div class="state-layer"></div>
          <img
            src="logos/kimi.svg"
            alt="Kimi Icon"
            class="toolbar-icon invert-color"
            draggable="true"
          />
          <!-- <span>Kimi</span> -->
        </button>
        <button
          class="btn glass-btn"
          data-url="https://github.com/copilot"
          data-label="GitHub Copilot"
          draggable="true"
        >
          <div class="state-layer"></div>
          <img
            src="logos/githubcopilot.svg"
            alt="Github Copilot Icon"
            class="toolbar-icon invert-color"
            draggable="true"
          />
          <!-- <span>Github Copilot</span> -->
        </button>
        <div id="custom-buttons-container"></div>
        <button id="split-view-btn" class="btn glass-btn" title="Split View">
          <div class="state-layer"></div>
          <svg
            class="toolbar-icon"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4ZM4 6V18H11V6H4ZM20 18V6H13V18H20Z"
              fill="currentColor"
            />
          </svg>
          <!-- <span data-i18n="splitView"></span> -->
        </button>
        <button class="btn settings-btn glass-btn" id="support-btn">
          <div class="state-layer"></div>
          <svg
            class="toolbar-icon"
            xmlns="http://www.w3.org/2000/svg"
            draggable="true"
            fill="currentColor"
            viewBox="0 -960 960 960"
          >
            <path
              d="M480-80q-139-35-229.5-159.5T160-516v-244l320-120 320 120v244q0 152-90.5 276.5T480-80Zm0-84q104-33 172-132t68-220v-189l-240-90-240 90v189q0 121 68 220t172 132Zm0-316Z"
            />
          </svg>
          <!-- <span data-i18n="settings"></span> -->
        </button>
      </nav>
      <main class="content">
        <div id="iframe-container">
          <div class="loader" role="status" aria-live="polite">
            <svg class="circular-loader" viewBox="25 25 50 50">
              <circle
                class="loader-path"
                cx="50"
                cy="50"
                r="20"
                fill="none"
                stroke-miterlimit="10"
              />
            </svg>
          </div>
        </div>
        <div id="support-page" class="support-page">
          <div class="settings-content">
            <!-- Service Visibility -->
            <div class="settings-section" id="models-section">
              <h3 class="section-title" data-i18n="serviceVisibility">
                Service Visibility
              </h3>
              <div class="toggle-list">
                <div class="toggle-item">
                  <img
                    src="logos/chatgpt.svg"
                    class="toggle-icon invert-color"
                    alt="ChatGPT"
                  /><span>ChatGPT</span
                  ><label class="switch"
                    ><input type="checkbox" id="toggle-chatgpt" checked /><span
                      class="slider"
                    ></span
                  ></label>
                </div>
                <div class="toggle-item">
                  <img
                    src="logos/gemini.svg"
                    class="toggle-icon"
                    alt="Gemini"
                  /><span>Gemini</span
                  ><label class="switch"
                    ><input type="checkbox" id="toggle-gemini" checked /><span
                      class="slider"
                    ></span
                  ></label>
                </div>
                <div class="toggle-item">
                  <img
                    src="logos/claude.svg"
                    class="toggle-icon"
                    alt="Claude"
                  /><span>Claude</span
                  ><label class="switch"
                    ><input type="checkbox" id="toggle-claude" /><span
                      class="slider"
                    ></span
                  ></label>
                </div>
                <div class="toggle-item">
                  <img
                    src="logos/copilot.svg"
                    class="toggle-icon"
                    alt="Copilot"
                  /><span>Copilot</span
                  ><label class="switch"
                    ><input type="checkbox" id="toggle-copilot" checked /><span
                      class="slider"
                    ></span
                  ></label>
                </div>
                <div class="toggle-item">
                  <img
                    src="logos/deepseek.svg"
                    class="toggle-icon"
                    alt="DeepSeek"
                  /><span>DeepSeek</span
                  ><label class="switch"
                    ><input type="checkbox" id="toggle-deepseek" /><span
                      class="slider"
                    ></span
                  ></label>
                </div>
                <div class="toggle-item">
                  <img
                    src="logos/grok.svg"
                    class="toggle-icon invert-color"
                    alt="Grok"
                  /><span>Grok</span
                  ><label class="switch"
                    ><input type="checkbox" id="toggle-grok" checked /><span
                      class="slider"
                    ></span
                  ></label>
                </div>
                <div class="toggle-item">
                  <img
                    src="logos/mistral.svg"
                    class="toggle-icon"
                    alt="Mistral"
                  /><span>Mistral</span
                  ><label class="switch"
                    ><input type="checkbox" id="toggle-mistral" /><span
                      class="slider"
                    ></span
                  ></label>
                </div>
                <div class="toggle-item">
                  <img
                    src="logos/perplexity.svg"
                    class="toggle-icon"
                    alt="Perplexity"
                  /><span>Perplexity</span
                  ><label class="switch"
                    ><input type="checkbox" id="toggle-perplexity" /><span
                      class="slider"
                    ></span
                  ></label>
                </div>
                <div class="toggle-item">
                  <img
                    src="logos/qwen.svg"
                    class="toggle-icon invert-color"
                    alt="Qwen"
                  /><span>Qwen</span
                  ><label class="switch"
                    ><input type="checkbox" id="toggle-qwen" /><span
                      class="slider"
                    ></span
                  ></label>
                </div>
                <div class="toggle-item">
                  <img
                    src="logos/kimi.svg"
                    class="toggle-icon invert-color"
                    alt="Kimi"
                  /><span>Kimi</span
                  ><label class="switch"
                    ><input type="checkbox" id="toggle-kimi" /><span
                      class="slider"
                    ></span
                  ></label>
                </div>
                <div class="toggle-item">
                  <img
                    src="logos/githubcopilot.svg"
                    class="toggle-icon invert-color"
                    alt="GitHub Copilot"
                  /><span>GitHub Copilot</span
                  ><label class="switch"
                    ><input type="checkbox" id="toggle-githubcopilot" /><span
                      class="slider"
                    ></span
                  ></label>
                </div>
              </div>
            </div>

            <!-- General Settings -->
            <div class="settings-section">
              <h3 class="section-title" data-i18n="general">General</h3>
              <div class="toggle-list">
                <div class="toggle-item">
                  <span data-i18n="rememberLastModel"
                    >Remember last selected model</span
                  >
                  <label class="switch">
                    <input type="checkbox" id="toggle-remember-last-model" />
                    <span class="slider"></span>
                  </label>
                </div>
                <div class="toggle-item">
                  <span data-i18n="splitView">Split View</span>
                  <label class="switch">
                    <input type="checkbox" id="toggle-split-view" checked />
                    <span class="slider"></span>
                  </label>
                </div>
                <div class="toggle-item">
                  <span>Content Extractor</span>
                  <label class="switch">
                    <input
                      type="checkbox"
                      id="toggle-content-extractor"
                      checked
                    />
                    <span class="slider"></span>
                  </label>
                </div>
                <div class="toggle-item">
                  <span data-i18n="scrollbarAlwaysVisible"
                    >Scrollbar Always Visible</span
                  >
                  <label class="switch">
                    <input
                      type="checkbox"
                      id="toggle-scrollbar-always-visible"
                      checked
                    />
                    <span class="slider"></span>
                  </label>
                </div>
              </div>
            </div>

            <!-- Custom Links -->
            <div class="settings-section" id="custom-links-container">
              <div class="section-header">
                <h3 class="section-title" data-i18n="customLinks">
                  Custom Links
                </h3>
              </div>
              <p class="section-subtitle">
                Add your own sites to the toolbar. Give it a friendly name,
                weâ€™ll fetch the favicon.
              </p>
              <div
                class="add-link-form"
                role="group"
                aria-label="Add custom link"
              >
                <input
                  type="text"
                  id="custom-link-url-input"
                  placeholder="URL (https://example.com)"
                  aria-label="URL"
                />
                <button
                  id="add-link-btn"
                  class="glass-btn"
                  aria-label="Add custom link"
                  data-i18n="add"
                >
                  Add
                </button>
              </div>
              <div
                id="custom-links-list"
                class="toggle-list"
                aria-live="polite"
              ></div>
            </div>

            <!-- Keyboard Shortcuts -->
            <div class="settings-section" id="shortcut-section">
              <div class="section-header">
                <h3 class="section-title" data-i18n="shortcutLabel">
                  Keyboard Shortcuts
                </h3>
                <button
                  id="manage-shortcuts-all"
                  class="manage-btn glass-btn"
                  title="Manage shortcuts in browser settings"
                  aria-label="Manage shortcuts in browser settings"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                  >
                    <path
                      d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12-.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.03-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"
                    />
                  </svg>
                </button>
              </div>
              <div class="shortcut-list">
                <div class="shortcut-item">
                  <span data-i18n="toggleExtension">Toggle Extension</span>
                  <input
                    type="text"
                    id="shortcut-input"
                    class="shortcut-input glass-tile"
                    readonly
                  />
                </div>
                <div class="shortcut-item">
                  <span data-i18n="switchNext">Next model</span>
                  <input
                    type="text"
                    id="shortcut-next-input"
                    class="shortcut-input glass-tile"
                    readonly
                  />
                </div>
                <div class="shortcut-item">
                  <span data-i18n="switchPrev">Previous model</span>
                  <input
                    type="text"
                    id="shortcut-prev-input"
                    class="shortcut-input glass-tile"
                    readonly
                  />
                </div>
              </div>
            </div>
          </div>

          <!-- <div class="footer">
            <button id="settings-done-btn" class="done-btn" data-i18n="done">Done</button>
          </div> -->
        </div>
      </main>
    </div>
    <svg style="position: absolute; width: 0; height: 0; pointer-events: none">
      <filter
        id="glass-blur"
        x="0"
        y="0"
        width="100%"
        height="100%"
        filterUnits="objectBoundingBox"
      >
        <feTurbulence
          type="fractalNoise"
          baseFrequency="0.003 0.007"
          numOctaves="1"
          result="turbulence"
        />
        <feDisplacementMap
          in="SourceGraphic"
          in2="turbulence"
          scale="20"
          xChannelSelector="R"
          yChannelSelector="G"
        />
      </filter>
    </svg>
    <!-- Load JavaScript module after DOM structure is ready -->
    <script type="module" src="sidepanel-modular.js"></script>
  </body>
</html>
